<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Chat Panel | Tournament Sa Kamao</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#020617;
  --card:#0f172a;
  --blue:#38bdf8;
  --purple:#a855f7;
  --green:#22c55e;
  --red:#ef4444;
  --text:#e5e7eb;
  --muted:#94a3b8;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Segoe UI,system-ui,sans-serif;
  background:radial-gradient(circle at top,#1e1b4b,#020617 70%);
  color:var(--text);
}

/* HEADER */
.header{
  display:flex;
  align-items:center;
  gap:12px;
  padding:14px;
  background:rgba(2,6,23,.95);
  backdrop-filter:blur(10px);
}
.back{
  width:40px;
  height:40px;
  border-radius:12px;
  background:linear-gradient(135deg,#60a5fa,#38bdf8);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  cursor:pointer;
}
.title{
  font-size:17px;
  font-weight:900;
  flex:1;
}
.toggle{
  font-size:12px;
  padding:6px 10px;
  border-radius:10px;
  background:#020617;
  border:1px solid #334155;
}

/* LAYOUT */
.main{
  display:flex;
  height:calc(100vh - 70px);
}

/* USER LIST */
.users{
  width:40%;
  background:#020617;
  border-right:1px solid #1e293b;
  overflow-y:auto;
}
.user{
  padding:14px;
  border-bottom:1px solid #1e293b;
  cursor:pointer;
}
.user:hover{background:#0f172a}
.user small{color:var(--muted)}

/* CHAT */
.chat{
  flex:1;
  display:flex;
  flex-direction:column;
}
.chat-area{
  flex:1;
  padding:14px;
  overflow-y:auto;
}
.msg{
  max-width:75%;
  padding:12px;
  border-radius:14px;
  margin-bottom:10px;
  font-size:14px;
}
.admin{
  background:linear-gradient(135deg,var(--blue),var(--purple));
  margin-left:auto;
}
.user-msg{
  background:#020617;
  border:1px solid #334155;
}

/* INPUT */
.input-bar{
  padding:10px;
  display:flex;
  gap:8px;
  background:#020617;
}
input{
  flex:1;
  padding:12px;
  border-radius:14px;
  border:none;
  background:#0f172a;
  color:#fff;
}
button{
  padding:12px 16px;
  border-radius:14px;
  border:none;
  font-weight:900;
  cursor:pointer;
}
.send{background:var(--green)}
.block{background:var(--red); color:#fff}
</style>
</head>

<body>

<script>
/* ADMIN CHECK */
if(localStorage.getItem("isAdmin")!=="true"){
  location.href="index.html";
}
</script>

<div class="header">
  <div class="back" onclick="location.href='profile.html'">‚Üê</div>
  <div class="title">Admin Chat Panel</div>
  <div class="toggle">Chat: ON</div>
</div>

<div class="main">

  <!-- USER LIST -->
  <div class="users" id="userList">
    <div class="user" onclick="openChat('Rahul')">
      Rahul<br><small>Active</small>
    </div>
    <div class="user" onclick="openChat('Aman')">
      Aman<br><small>Blocked</small>
    </div>
  </div>

  <!-- CHAT -->
  <div class="chat">
    <div class="chat-area" id="chatArea">
      <div class="msg user-msg">User message appears here</div>
    </div>

    <div class="input-bar">
      <input id="adminMsg" placeholder="Type reply">
      <button class="send" onclick="sendAdmin()">SEND</button>
      <button class="block" onclick="toggleBlock()">BLOCK</button>
    </div>
  </div>

</div>

<!-- SOUND -->
<audio id="tap" src="assets/tap.mp3"></audio>
<audio id="bgm" src="assets/bgm.mp3" loop></audio>

<script>
/* MUSIC */
const bgm=document.getElementById("bgm");
bgm.volume=0.35;
bgm.play().catch(()=>{});

/* TAP */
document.addEventListener("touchstart",()=>{
  const t=document.getElementById("tap");
  t.currentTime=0;
  t.play().catch(()=>{});
});

let currentUser=null;
let blocked=false;

function openChat(name){
  currentUser=name;
  document.getElementById("chatArea").innerHTML=
    "<div class='msg user-msg'>Chat with "+name+"</div>";
}

function sendAdmin(){
  if(!currentUser) return;
  const txt=document.getElementById("adminMsg");
  if(!txt.value.trim()) return;

  const d=document.createElement("div");
  d.className="msg admin";
  d.innerText=txt.value;
  document.getElementById("chatArea").appendChild(d);
  txt.value="";
}

function toggleBlock(){
  blocked=!blocked;
  alert(blocked ? "User chat blocked" : "User chat unblocked");
  // TODO: save block state to database
}
</script>

</body>
</html>
